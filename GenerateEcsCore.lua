local _Poollocal CoreComponentIds = {    Movable = 1,    Asset = 2,    AssetObject = 3,    Position = 4,    FramePosition = 5,    GridType = 6,    Destroy = 7,    UnNormalDestroy = 8,    ResetGameBoard = 9,    GameBoardCache = 10,    ViewGrid = 11,    ViewPos = 12,    Angle = 13,    SortOrder = 14,    Scale = 15,    GameBoard = 16,    Element = 17,    ElementConfig = 18,    MoveTween = 19,    Input = 20,    Link = 21,    CheckCanEliminate = 22,    Linked = 23,    Health = 24,    Interactive = 25,    Resource = 26,    Score = 27,    Item = 28,    ItemUse = 29,    ItemUsePos = 30,    TimeRecord = 31,    ElementDiedRecord = 32,    MonsterDiedRecord = 33,    MapRecord = 34,    Monster = 35,    IdComponent = 36,    Moving = 37,    ElementFrame = 38,    ElementFrameConfig = 39,    ElementFrameBoardCache = 40,}Entitas.CoreComponentIds = CoreComponentIdslocal Bag = Entitas.Bag----------------------------Entity     start------------------------------------------------@class Entity---@field asset AssetComponent---@field assetObject AssetObjectComponent---@field position PositionComponent---@field framePosition FramePositionComponent---@field gridType GridTypeComponent---@field gameBoardCache GameBoardCacheComponent---@field viewGrid ViewGridComponent---@field viewPos ViewPosComponent---@field angle AngleComponent---@field sortOrder SortOrderComponent---@field scale ScaleComponent---@field gameBoard GameBoardComponent---@field elementConfig ElementConfigComponent---@field moveTween MoveTweenComponent---@field input InputComponent---@field link LinkComponent---@field linked LinkedComponent---@field health HealthComponent---@field resource ResourceComponent---@field score ScoreComponent---@field item ItemComponent---@field itemUsePos ItemUsePosComponent---@field timeRecord TimeRecordComponent---@field elementDiedRecord ElementDiedRecordComponent---@field monsterDiedRecord MonsterDiedRecordComponent---@field mapRecord MapRecordComponent---@field monster MonsterComponent---@field idComponent IdComponentComponent---@field elementFrameConfig ElementFrameConfigComponent---@field elementFrameBoardCache ElementFrameBoardCacheComponent---@field getFourNeighbor fun(self:Entity,grid:Entity[][]):Entity[]---@field getDirection fun(self:Entity,x:number,y:number):FrameIndexlocal Entity = Entitas.Entitylocal MovableComponent = {}local DestroyComponent = {}local UnNormalDestroyComponent = {}local ResetGameBoardComponent = {}local ElementComponent = {}local CheckCanEliminateComponent = {}local InteractiveComponent = {}local ItemUseComponent = {}local MovingComponent = {}local ElementFrameComponent = {}local function getComponent(pool, componentClass)    local component    if pool:size() > 0 then        component = pool:removeLast()    else        component = componentClass:new()    end    return componentend    ---@return Entityfunction Entity:setMovable(v)    if (v ~= self:hasMovable()) then        if (v) then            self:addComponent(CoreComponentIds.Movable, MovableComponent, 'Movable')        else            self:removeComponent(CoreComponentIds.Movable)        end    end    return selfend---@return booleanfunction Entity:hasMovable()  return self:hasComponent(CoreComponentIds.Movable)end    ---@class AssetComponent : IComponent---@field value stringlocal AssetComponent = {}---@privatefunction AssetComponent:new()    return setmetatable({}, {__index = AssetComponent})end---@type Entitas.Baglocal _AssetCP = Bag:new()for i=1,16 do  _AssetCP:add(AssetComponent:new())endfunction Entity:clearAssetCP()    _AssetCP:clear()end---@return booleanfunction Entity:hasAsset()  return self:hasComponent(CoreComponentIds.Asset)end---@param value string---@returns Entitas.Entityfunction Entity:addAsset (value)    local component = getComponent(_AssetCP, AssetComponent)    component.value = value;    self.asset = component    self:addComponent(CoreComponentIds.Asset, component, 'Asset')    return selfendfunction Entity:replaceAsset (value)    local previousComponent    if self:hasAsset() then        previousComponent = self.asset    end    local component = getComponent(_AssetCP, AssetComponent)    component.value = value    self.asset = component    self:replaceComponent(CoreComponentIds.Asset, component, 'Asset')    if (previousComponent ~= nil) then        _AssetCP:add(previousComponent)    end    return selfendfunction Entity:removeAsset ()    local component = self.Asset    self:removeComponent(CoreComponentIds.Asset)    _AssetCP:add(component)    return selfend    ---@class AssetObjectComponent : IComponent---@field value GameObjectlocal AssetObjectComponent = {}---@privatefunction AssetObjectComponent:new()    return setmetatable({}, {__index = AssetObjectComponent})end---@type Entitas.Baglocal _AssetObjectCP = Bag:new()for i=1,16 do  _AssetObjectCP:add(AssetObjectComponent:new())endfunction Entity:clearAssetObjectCP()    _AssetObjectCP:clear()end---@return booleanfunction Entity:hasAssetObject()  return self:hasComponent(CoreComponentIds.AssetObject)end---@param value GameObject---@returns Entitas.Entityfunction Entity:addAssetObject (value)    local component = getComponent(_AssetObjectCP, AssetObjectComponent)    component.value = value;    self.assetObject = component    self:addComponent(CoreComponentIds.AssetObject, component, 'AssetObject')    return selfendfunction Entity:replaceAssetObject (value)    local previousComponent    if self:hasAssetObject() then        previousComponent = self.assetObject    end    local component = getComponent(_AssetObjectCP, AssetObjectComponent)    component.value = value    self.assetObject = component    self:replaceComponent(CoreComponentIds.AssetObject, component, 'AssetObject')    if (previousComponent ~= nil) then        _AssetObjectCP:add(previousComponent)    end    return selfendfunction Entity:removeAssetObject ()    local component = self.AssetObject    self:removeComponent(CoreComponentIds.AssetObject)    _AssetObjectCP:add(component)    return selfend    ---@class PositionComponent : IComponent---@field x number---@field y number---@field z numberlocal PositionComponent = {}---@privatefunction PositionComponent:new()    return setmetatable({}, {__index = PositionComponent})end---@type Entitas.Baglocal _PositionCP = Bag:new()for i=1,16 do  _PositionCP:add(PositionComponent:new())endfunction Entity:clearPositionCP()    _PositionCP:clear()end---@return booleanfunction Entity:hasPosition()  return self:hasComponent(CoreComponentIds.Position)end---@param x number---@param y number---@param z number---@returns Entitas.Entityfunction Entity:addPosition (x, y, z)    local component = getComponent(_PositionCP, PositionComponent)    component.x = x;    component.y = y;    component.z = z;    self.position = component    self:addComponent(CoreComponentIds.Position, component, 'Position')    return selfendfunction Entity:replacePosition (x, y, z)    local previousComponent    if self:hasPosition() then        previousComponent = self.position    end    local component = getComponent(_PositionCP, PositionComponent)    component.x = x    component.y = y    component.z = z    self.position = component    self:replaceComponent(CoreComponentIds.Position, component, 'Position')    if (previousComponent ~= nil) then        _PositionCP:add(previousComponent)    end    return selfendfunction Entity:removePosition ()    local component = self.Position    self:removeComponent(CoreComponentIds.Position)    _PositionCP:add(component)    return selfend    ---@class FramePositionComponent : IComponent---@field x number---@field y number---@field frameIndex WeGame.FrameIndexlocal FramePositionComponent = {}---@privatefunction FramePositionComponent:new()    return setmetatable({}, {__index = FramePositionComponent})end---@type Entitas.Baglocal _FramePositionCP = Bag:new()for i=1,16 do  _FramePositionCP:add(FramePositionComponent:new())endfunction Entity:clearFramePositionCP()    _FramePositionCP:clear()end---@return booleanfunction Entity:hasFramePosition()  return self:hasComponent(CoreComponentIds.FramePosition)end---@param x number---@param y number---@param frameIndex WeGame.FrameIndex---@returns Entitas.Entityfunction Entity:addFramePosition (x, y, frameIndex)    local component = getComponent(_FramePositionCP, FramePositionComponent)    component.x = x;    component.y = y;    component.frameIndex = frameIndex;    self.framePosition = component    self:addComponent(CoreComponentIds.FramePosition, component, 'FramePosition')    return selfendfunction Entity:replaceFramePosition (x, y, frameIndex)    local previousComponent    if self:hasFramePosition() then        previousComponent = self.framePosition    end    local component = getComponent(_FramePositionCP, FramePositionComponent)    component.x = x    component.y = y    component.frameIndex = frameIndex    self.framePosition = component    self:replaceComponent(CoreComponentIds.FramePosition, component, 'FramePosition')    if (previousComponent ~= nil) then        _FramePositionCP:add(previousComponent)    end    return selfendfunction Entity:removeFramePosition ()    local component = self.FramePosition    self:removeComponent(CoreComponentIds.FramePosition)    _FramePositionCP:add(component)    return selfend    ---@class GridTypeComponent : IComponent---@field gridType WeGame.GridTypelocal GridTypeComponent = {}---@privatefunction GridTypeComponent:new()    return setmetatable({}, {__index = GridTypeComponent})end---@type Entitas.Baglocal _GridTypeCP = Bag:new()for i=1,16 do  _GridTypeCP:add(GridTypeComponent:new())endfunction Entity:clearGridTypeCP()    _GridTypeCP:clear()end---@return booleanfunction Entity:hasGridType()  return self:hasComponent(CoreComponentIds.GridType)end---@param gridType WeGame.GridType---@returns Entitas.Entityfunction Entity:addGridType (gridType)    local component = getComponent(_GridTypeCP, GridTypeComponent)    component.gridType = gridType;    self.gridType = component    self:addComponent(CoreComponentIds.GridType, component, 'GridType')    return selfendfunction Entity:replaceGridType (gridType)    local previousComponent    if self:hasGridType() then        previousComponent = self.gridType    end    local component = getComponent(_GridTypeCP, GridTypeComponent)    component.gridType = gridType    self.gridType = component    self:replaceComponent(CoreComponentIds.GridType, component, 'GridType')    if (previousComponent ~= nil) then        _GridTypeCP:add(previousComponent)    end    return selfendfunction Entity:removeGridType ()    local component = self.GridType    self:removeComponent(CoreComponentIds.GridType)    _GridTypeCP:add(component)    return selfend    ---@return Entityfunction Entity:setDestroy(v)    if (v ~= self:hasDestroy()) then        if (v) then            self:addComponent(CoreComponentIds.Destroy, DestroyComponent, 'Destroy')        else            self:removeComponent(CoreComponentIds.Destroy)        end    end    return selfend---@return booleanfunction Entity:hasDestroy()  return self:hasComponent(CoreComponentIds.Destroy)end    ---@return Entityfunction Entity:setUnNormalDestroy(v)    if (v ~= self:hasUnNormalDestroy()) then        if (v) then            self:addComponent(CoreComponentIds.UnNormalDestroy, UnNormalDestroyComponent, 'UnNormalDestroy')        else            self:removeComponent(CoreComponentIds.UnNormalDestroy)        end    end    return selfend---@return booleanfunction Entity:hasUnNormalDestroy()  return self:hasComponent(CoreComponentIds.UnNormalDestroy)end    ---@return Entityfunction Entity:setResetGameBoard(v)    if (v ~= self:hasResetGameBoard()) then        if (v) then            self:addComponent(CoreComponentIds.ResetGameBoard, ResetGameBoardComponent, 'ResetGameBoard')        else            self:removeComponent(CoreComponentIds.ResetGameBoard)        end    end    return selfend---@return booleanfunction Entity:hasResetGameBoard()  return self:hasComponent(CoreComponentIds.ResetGameBoard)end    ---@class GameBoardCacheComponent : IComponent---@field grid Entity[][][]local GameBoardCacheComponent = {}---@privatefunction GameBoardCacheComponent:new()    return setmetatable({}, {__index = GameBoardCacheComponent})end---@type Entitas.Baglocal _GameBoardCacheCP = Bag:new()for i=1,16 do  _GameBoardCacheCP:add(GameBoardCacheComponent:new())endfunction Entity:clearGameBoardCacheCP()    _GameBoardCacheCP:clear()end---@return booleanfunction Entity:hasGameBoardCache()  return self:hasComponent(CoreComponentIds.GameBoardCache)end---@param grid Entity[][][]---@returns Entitas.Entityfunction Entity:addGameBoardCache (grid)    local component = getComponent(_GameBoardCacheCP, GameBoardCacheComponent)    component.grid = grid;    self.gameBoardCache = component    self:addComponent(CoreComponentIds.GameBoardCache, component, 'GameBoardCache')    return selfendfunction Entity:replaceGameBoardCache (grid)    local previousComponent    if self:hasGameBoardCache() then        previousComponent = self.gameBoardCache    end    local component = getComponent(_GameBoardCacheCP, GameBoardCacheComponent)    component.grid = grid    self.gameBoardCache = component    self:replaceComponent(CoreComponentIds.GameBoardCache, component, 'GameBoardCache')    if (previousComponent ~= nil) then        _GameBoardCacheCP:add(previousComponent)    end    return selfendfunction Entity:removeGameBoardCache ()    local component = self.GameBoardCache    self:removeComponent(CoreComponentIds.GameBoardCache)    _GameBoardCacheCP:add(component)    return selfend    ---@class ViewGridComponent : IComponent---@field value  Entity[][]local ViewGridComponent = {}---@privatefunction ViewGridComponent:new()    return setmetatable({}, {__index = ViewGridComponent})end---@type Entitas.Baglocal _ViewGridCP = Bag:new()for i=1,16 do  _ViewGridCP:add(ViewGridComponent:new())endfunction Entity:clearViewGridCP()    _ViewGridCP:clear()end---@return booleanfunction Entity:hasViewGrid()  return self:hasComponent(CoreComponentIds.ViewGrid)end---@param value  Entity[][]---@returns Entitas.Entityfunction Entity:addViewGrid (value)    local component = getComponent(_ViewGridCP, ViewGridComponent)    component.value = value;    self.viewGrid = component    self:addComponent(CoreComponentIds.ViewGrid, component, 'ViewGrid')    return selfendfunction Entity:replaceViewGrid (value)    local previousComponent    if self:hasViewGrid() then        previousComponent = self.viewGrid    end    local component = getComponent(_ViewGridCP, ViewGridComponent)    component.value = value    self.viewGrid = component    self:replaceComponent(CoreComponentIds.ViewGrid, component, 'ViewGrid')    if (previousComponent ~= nil) then        _ViewGridCP:add(previousComponent)    end    return selfendfunction Entity:removeViewGrid ()    local component = self.ViewGrid    self:removeComponent(CoreComponentIds.ViewGrid)    _ViewGridCP:add(component)    return selfend    ---@class ViewPosComponent : IComponent---@field x   number---@field y   numberlocal ViewPosComponent = {}---@privatefunction ViewPosComponent:new()    return setmetatable({}, {__index = ViewPosComponent})end---@type Entitas.Baglocal _ViewPosCP = Bag:new()for i=1,16 do  _ViewPosCP:add(ViewPosComponent:new())endfunction Entity:clearViewPosCP()    _ViewPosCP:clear()end---@return booleanfunction Entity:hasViewPos()  return self:hasComponent(CoreComponentIds.ViewPos)end---@param x   number---@param y   number---@returns Entitas.Entityfunction Entity:addViewPos (x , y )    local component = getComponent(_ViewPosCP, ViewPosComponent)    component.x  = x ;    component.y  = y ;    self.viewPos = component    self:addComponent(CoreComponentIds.ViewPos, component, 'ViewPos')    return selfendfunction Entity:replaceViewPos (x , y )    local previousComponent    if self:hasViewPos() then        previousComponent = self.viewPos    end    local component = getComponent(_ViewPosCP, ViewPosComponent)    component.x  = x     component.y  = y     self.viewPos = component    self:replaceComponent(CoreComponentIds.ViewPos, component, 'ViewPos')    if (previousComponent ~= nil) then        _ViewPosCP:add(previousComponent)    end    return selfendfunction Entity:removeViewPos ()    local component = self.ViewPos    self:removeComponent(CoreComponentIds.ViewPos)    _ViewPosCP:add(component)    return selfend    ---@class AngleComponent : IComponent---@field value   numberlocal AngleComponent = {}---@privatefunction AngleComponent:new()    return setmetatable({}, {__index = AngleComponent})end---@type Entitas.Baglocal _AngleCP = Bag:new()for i=1,16 do  _AngleCP:add(AngleComponent:new())endfunction Entity:clearAngleCP()    _AngleCP:clear()end---@return booleanfunction Entity:hasAngle()  return self:hasComponent(CoreComponentIds.Angle)end---@param value   number---@returns Entitas.Entityfunction Entity:addAngle (value )    local component = getComponent(_AngleCP, AngleComponent)    component.value  = value ;    self.angle = component    self:addComponent(CoreComponentIds.Angle, component, 'Angle')    return selfendfunction Entity:replaceAngle (value )    local previousComponent    if self:hasAngle() then        previousComponent = self.angle    end    local component = getComponent(_AngleCP, AngleComponent)    component.value  = value     self.angle = component    self:replaceComponent(CoreComponentIds.Angle, component, 'Angle')    if (previousComponent ~= nil) then        _AngleCP:add(previousComponent)    end    return selfendfunction Entity:removeAngle ()    local component = self.Angle    self:removeComponent(CoreComponentIds.Angle)    _AngleCP:add(component)    return selfend    ---@class SortOrderComponent : IComponent---@field value   numberlocal SortOrderComponent = {}---@privatefunction SortOrderComponent:new()    return setmetatable({}, {__index = SortOrderComponent})end---@type Entitas.Baglocal _SortOrderCP = Bag:new()for i=1,16 do  _SortOrderCP:add(SortOrderComponent:new())endfunction Entity:clearSortOrderCP()    _SortOrderCP:clear()end---@return booleanfunction Entity:hasSortOrder()  return self:hasComponent(CoreComponentIds.SortOrder)end---@param value   number---@returns Entitas.Entityfunction Entity:addSortOrder (value )    local component = getComponent(_SortOrderCP, SortOrderComponent)    component.value  = value ;    self.sortOrder = component    self:addComponent(CoreComponentIds.SortOrder, component, 'SortOrder')    return selfendfunction Entity:replaceSortOrder (value )    local previousComponent    if self:hasSortOrder() then        previousComponent = self.sortOrder    end    local component = getComponent(_SortOrderCP, SortOrderComponent)    component.value  = value     self.sortOrder = component    self:replaceComponent(CoreComponentIds.SortOrder, component, 'SortOrder')    if (previousComponent ~= nil) then        _SortOrderCP:add(previousComponent)    end    return selfendfunction Entity:removeSortOrder ()    local component = self.SortOrder    self:removeComponent(CoreComponentIds.SortOrder)    _SortOrderCP:add(component)    return selfend    ---@class ScaleComponent : IComponent---@field value   numberlocal ScaleComponent = {}---@privatefunction ScaleComponent:new()    return setmetatable({}, {__index = ScaleComponent})end---@type Entitas.Baglocal _ScaleCP = Bag:new()for i=1,16 do  _ScaleCP:add(ScaleComponent:new())endfunction Entity:clearScaleCP()    _ScaleCP:clear()end---@return booleanfunction Entity:hasScale()  return self:hasComponent(CoreComponentIds.Scale)end---@param value   number---@returns Entitas.Entityfunction Entity:addScale (value )    local component = getComponent(_ScaleCP, ScaleComponent)    component.value  = value ;    self.scale = component    self:addComponent(CoreComponentIds.Scale, component, 'Scale')    return selfendfunction Entity:replaceScale (value )    local previousComponent    if self:hasScale() then        previousComponent = self.scale    end    local component = getComponent(_ScaleCP, ScaleComponent)    component.value  = value     self.scale = component    self:replaceComponent(CoreComponentIds.Scale, component, 'Scale')    if (previousComponent ~= nil) then        _ScaleCP:add(previousComponent)    end    return selfendfunction Entity:removeScale ()    local component = self.Scale    self:removeComponent(CoreComponentIds.Scale)    _ScaleCP:add(component)    return selfend    ---@class GameBoardComponent : IComponent---@field levelName string---@field rows   number---@field columns   number---@field levelConfig Config.LevelMapConfiglocal GameBoardComponent = {}---@privatefunction GameBoardComponent:new()    return setmetatable({}, {__index = GameBoardComponent})end---@type Entitas.Baglocal _GameBoardCP = Bag:new()for i=1,16 do  _GameBoardCP:add(GameBoardComponent:new())endfunction Entity:clearGameBoardCP()    _GameBoardCP:clear()end---@return booleanfunction Entity:hasGameBoard()  return self:hasComponent(CoreComponentIds.GameBoard)end---@param levelName string---@param rows   number---@param columns   number---@param levelConfig Config.LevelMapConfig---@returns Entitas.Entityfunction Entity:addGameBoard (levelName, rows , columns , levelConfig)    local component = getComponent(_GameBoardCP, GameBoardComponent)    component.levelName = levelName;    component.rows  = rows ;    component.columns  = columns ;    component.levelConfig = levelConfig;    self.gameBoard = component    self:addComponent(CoreComponentIds.GameBoard, component, 'GameBoard')    return selfendfunction Entity:replaceGameBoard (levelName, rows , columns , levelConfig)    local previousComponent    if self:hasGameBoard() then        previousComponent = self.gameBoard    end    local component = getComponent(_GameBoardCP, GameBoardComponent)    component.levelName = levelName    component.rows  = rows     component.columns  = columns     component.levelConfig = levelConfig    self.gameBoard = component    self:replaceComponent(CoreComponentIds.GameBoard, component, 'GameBoard')    if (previousComponent ~= nil) then        _GameBoardCP:add(previousComponent)    end    return selfendfunction Entity:removeGameBoard ()    local component = self.GameBoard    self:removeComponent(CoreComponentIds.GameBoard)    _GameBoardCP:add(component)    return selfend    ---@return Entityfunction Entity:setElement(v)    if (v ~= self:hasElement()) then        if (v) then            self:addComponent(CoreComponentIds.Element, ElementComponent, 'Element')        else            self:removeComponent(CoreComponentIds.Element)        end    end    return selfend---@return booleanfunction Entity:hasElement()  return self:hasComponent(CoreComponentIds.Element)end    ---@class ElementConfigComponent : IComponent---@field config   Config.Elementlocal ElementConfigComponent = {}---@privatefunction ElementConfigComponent:new()    return setmetatable({}, {__index = ElementConfigComponent})end---@type Entitas.Baglocal _ElementConfigCP = Bag:new()for i=1,16 do  _ElementConfigCP:add(ElementConfigComponent:new())endfunction Entity:clearElementConfigCP()    _ElementConfigCP:clear()end---@return booleanfunction Entity:hasElementConfig()  return self:hasComponent(CoreComponentIds.ElementConfig)end---@param config   Config.Element---@returns Entitas.Entityfunction Entity:addElementConfig (config )    local component = getComponent(_ElementConfigCP, ElementConfigComponent)    component.config  = config ;    self.elementConfig = component    self:addComponent(CoreComponentIds.ElementConfig, component, 'ElementConfig')    return selfendfunction Entity:replaceElementConfig (config )    local previousComponent    if self:hasElementConfig() then        previousComponent = self.elementConfig    end    local component = getComponent(_ElementConfigCP, ElementConfigComponent)    component.config  = config     self.elementConfig = component    self:replaceComponent(CoreComponentIds.ElementConfig, component, 'ElementConfig')    if (previousComponent ~= nil) then        _ElementConfigCP:add(previousComponent)    end    return selfendfunction Entity:removeElementConfig ()    local component = self.ElementConfig    self:removeComponent(CoreComponentIds.ElementConfig)    _ElementConfigCP:add(component)    return selfend    ---@class MoveTweenComponent : IComponent---@field posArray   Point[]local MoveTweenComponent = {}---@privatefunction MoveTweenComponent:new()    return setmetatable({}, {__index = MoveTweenComponent})end---@type Entitas.Baglocal _MoveTweenCP = Bag:new()for i=1,16 do  _MoveTweenCP:add(MoveTweenComponent:new())endfunction Entity:clearMoveTweenCP()    _MoveTweenCP:clear()end---@return booleanfunction Entity:hasMoveTween()  return self:hasComponent(CoreComponentIds.MoveTween)end---@param posArray   Point[]---@returns Entitas.Entityfunction Entity:addMoveTween (posArray )    local component = getComponent(_MoveTweenCP, MoveTweenComponent)    component.posArray  = posArray ;    self.moveTween = component    self:addComponent(CoreComponentIds.MoveTween, component, 'MoveTween')    return selfendfunction Entity:replaceMoveTween (posArray )    local previousComponent    if self:hasMoveTween() then        previousComponent = self.moveTween    end    local component = getComponent(_MoveTweenCP, MoveTweenComponent)    component.posArray  = posArray     self.moveTween = component    self:replaceComponent(CoreComponentIds.MoveTween, component, 'MoveTween')    if (previousComponent ~= nil) then        _MoveTweenCP:add(previousComponent)    end    return selfendfunction Entity:removeMoveTween ()    local component = self.MoveTween    self:removeComponent(CoreComponentIds.MoveTween)    _MoveTweenCP:add(component)    return selfend    ---@class InputComponent : IComponent---@field x number---@field y number---@field touchType  TouchTypelocal InputComponent = {}---@privatefunction InputComponent:new()    return setmetatable({}, {__index = InputComponent})end---@type Entitas.Baglocal _InputCP = Bag:new()for i=1,16 do  _InputCP:add(InputComponent:new())endfunction Entity:clearInputCP()    _InputCP:clear()end---@return booleanfunction Entity:hasInput()  return self:hasComponent(CoreComponentIds.Input)end---@param x number---@param y number---@param touchType  TouchType---@returns Entitas.Entityfunction Entity:addInput (x, y, touchType)    local component = getComponent(_InputCP, InputComponent)    component.x = x;    component.y = y;    component.touchType = touchType;    self.input = component    self:addComponent(CoreComponentIds.Input, component, 'Input')    return selfendfunction Entity:replaceInput (x, y, touchType)    local previousComponent    if self:hasInput() then        previousComponent = self.input    end    local component = getComponent(_InputCP, InputComponent)    component.x = x    component.y = y    component.touchType = touchType    self.input = component    self:replaceComponent(CoreComponentIds.Input, component, 'Input')    if (previousComponent ~= nil) then        _InputCP:add(previousComponent)    end    return selfendfunction Entity:removeInput ()    local component = self.Input    self:removeComponent(CoreComponentIds.Input)    _InputCP:add(component)    return selfend    ---@class LinkComponent : IComponent---@field linkArray Entity[]---@field gridType GridTypelocal LinkComponent = {}---@privatefunction LinkComponent:new()    return setmetatable({}, {__index = LinkComponent})end---@type Entitas.Baglocal _LinkCP = Bag:new()for i=1,16 do  _LinkCP:add(LinkComponent:new())endfunction Entity:clearLinkCP()    _LinkCP:clear()end---@return booleanfunction Entity:hasLink()  return self:hasComponent(CoreComponentIds.Link)end---@param linkArray Entity[]---@param gridType GridType---@returns Entitas.Entityfunction Entity:addLink (linkArray, gridType)    local component = getComponent(_LinkCP, LinkComponent)    component.linkArray = linkArray;    component.gridType = gridType;    self.link = component    self:addComponent(CoreComponentIds.Link, component, 'Link')    return selfendfunction Entity:replaceLink (linkArray, gridType)    local previousComponent    if self:hasLink() then        previousComponent = self.link    end    local component = getComponent(_LinkCP, LinkComponent)    component.linkArray = linkArray    component.gridType = gridType    self.link = component    self:replaceComponent(CoreComponentIds.Link, component, 'Link')    if (previousComponent ~= nil) then        _LinkCP:add(previousComponent)    end    return selfendfunction Entity:removeLink ()    local component = self.Link    self:removeComponent(CoreComponentIds.Link)    _LinkCP:add(component)    return selfend    ---@return Entityfunction Entity:setCheckCanEliminate(v)    if (v ~= self:hasCheckCanEliminate()) then        if (v) then            self:addComponent(CoreComponentIds.CheckCanEliminate, CheckCanEliminateComponent, 'CheckCanEliminate')        else            self:removeComponent(CoreComponentIds.CheckCanEliminate)        end    end    return selfend---@return booleanfunction Entity:hasCheckCanEliminate()  return self:hasComponent(CoreComponentIds.CheckCanEliminate)end    ---@class LinkedComponent : IComponent---@field index numberlocal LinkedComponent = {}---@privatefunction LinkedComponent:new()    return setmetatable({}, {__index = LinkedComponent})end---@type Entitas.Baglocal _LinkedCP = Bag:new()for i=1,16 do  _LinkedCP:add(LinkedComponent:new())endfunction Entity:clearLinkedCP()    _LinkedCP:clear()end---@return booleanfunction Entity:hasLinked()  return self:hasComponent(CoreComponentIds.Linked)end---@param index number---@returns Entitas.Entityfunction Entity:addLinked (index)    local component = getComponent(_LinkedCP, LinkedComponent)    component.index = index;    self.linked = component    self:addComponent(CoreComponentIds.Linked, component, 'Linked')    return selfendfunction Entity:replaceLinked (index)    local previousComponent    if self:hasLinked() then        previousComponent = self.linked    end    local component = getComponent(_LinkedCP, LinkedComponent)    component.index = index    self.linked = component    self:replaceComponent(CoreComponentIds.Linked, component, 'Linked')    if (previousComponent ~= nil) then        _LinkedCP:add(previousComponent)    end    return selfendfunction Entity:removeLinked ()    local component = self.Linked    self:removeComponent(CoreComponentIds.Linked)    _LinkedCP:add(component)    return selfend    ---@class HealthComponent : IComponent---@field hp   numberlocal HealthComponent = {}---@privatefunction HealthComponent:new()    return setmetatable({}, {__index = HealthComponent})end---@type Entitas.Baglocal _HealthCP = Bag:new()for i=1,16 do  _HealthCP:add(HealthComponent:new())endfunction Entity:clearHealthCP()    _HealthCP:clear()end---@return booleanfunction Entity:hasHealth()  return self:hasComponent(CoreComponentIds.Health)end---@param hp   number---@returns Entitas.Entityfunction Entity:addHealth (hp )    local component = getComponent(_HealthCP, HealthComponent)    component.hp  = hp ;    self.health = component    self:addComponent(CoreComponentIds.Health, component, 'Health')    return selfendfunction Entity:replaceHealth (hp )    local previousComponent    if self:hasHealth() then        previousComponent = self.health    end    local component = getComponent(_HealthCP, HealthComponent)    component.hp  = hp     self.health = component    self:replaceComponent(CoreComponentIds.Health, component, 'Health')    if (previousComponent ~= nil) then        _HealthCP:add(previousComponent)    end    return selfendfunction Entity:removeHealth ()    local component = self.Health    self:removeComponent(CoreComponentIds.Health)    _HealthCP:add(component)    return selfend    ---@return Entityfunction Entity:setInteractive(v)    if (v ~= self:hasInteractive()) then        if (v) then            self:addComponent(CoreComponentIds.Interactive, InteractiveComponent, 'Interactive')        else            self:removeComponent(CoreComponentIds.Interactive)        end    end    return selfend---@return booleanfunction Entity:hasInteractive()  return self:hasComponent(CoreComponentIds.Interactive)end    ---@class ResourceComponent : IComponent---@field name stringlocal ResourceComponent = {}---@privatefunction ResourceComponent:new()    return setmetatable({}, {__index = ResourceComponent})end---@type Entitas.Baglocal _ResourceCP = Bag:new()for i=1,16 do  _ResourceCP:add(ResourceComponent:new())endfunction Entity:clearResourceCP()    _ResourceCP:clear()end---@return booleanfunction Entity:hasResource()  return self:hasComponent(CoreComponentIds.Resource)end---@param name string---@returns Entitas.Entityfunction Entity:addResource (name)    local component = getComponent(_ResourceCP, ResourceComponent)    component.name = name;    self.resource = component    self:addComponent(CoreComponentIds.Resource, component, 'Resource')    return selfendfunction Entity:replaceResource (name)    local previousComponent    if self:hasResource() then        previousComponent = self.resource    end    local component = getComponent(_ResourceCP, ResourceComponent)    component.name = name    self.resource = component    self:replaceComponent(CoreComponentIds.Resource, component, 'Resource')    if (previousComponent ~= nil) then        _ResourceCP:add(previousComponent)    end    return selfendfunction Entity:removeResource ()    local component = self.Resource    self:removeComponent(CoreComponentIds.Resource)    _ResourceCP:add(component)    return selfend    ---@class ScoreComponent : IComponent---@field value numberlocal ScoreComponent = {}---@privatefunction ScoreComponent:new()    return setmetatable({}, {__index = ScoreComponent})end---@type Entitas.Baglocal _ScoreCP = Bag:new()for i=1,16 do  _ScoreCP:add(ScoreComponent:new())endfunction Entity:clearScoreCP()    _ScoreCP:clear()end---@return booleanfunction Entity:hasScore()  return self:hasComponent(CoreComponentIds.Score)end---@param value number---@returns Entitas.Entityfunction Entity:addScore (value)    local component = getComponent(_ScoreCP, ScoreComponent)    component.value = value;    self.score = component    self:addComponent(CoreComponentIds.Score, component, 'Score')    return selfendfunction Entity:replaceScore (value)    local previousComponent    if self:hasScore() then        previousComponent = self.score    end    local component = getComponent(_ScoreCP, ScoreComponent)    component.value = value    self.score = component    self:replaceComponent(CoreComponentIds.Score, component, 'Score')    if (previousComponent ~= nil) then        _ScoreCP:add(previousComponent)    end    return selfendfunction Entity:removeScore ()    local component = self.Score    self:removeComponent(CoreComponentIds.Score)    _ScoreCP:add(component)    return selfend    ---@class ItemComponent : IComponent---@field itemId number---@field itemNum numberlocal ItemComponent = {}---@privatefunction ItemComponent:new()    return setmetatable({}, {__index = ItemComponent})end---@type Entitas.Baglocal _ItemCP = Bag:new()for i=1,16 do  _ItemCP:add(ItemComponent:new())endfunction Entity:clearItemCP()    _ItemCP:clear()end---@return booleanfunction Entity:hasItem()  return self:hasComponent(CoreComponentIds.Item)end---@param itemId number---@param itemNum number---@returns Entitas.Entityfunction Entity:addItem (itemId, itemNum)    local component = getComponent(_ItemCP, ItemComponent)    component.itemId = itemId;    component.itemNum = itemNum;    self.item = component    self:addComponent(CoreComponentIds.Item, component, 'Item')    return selfendfunction Entity:replaceItem (itemId, itemNum)    local previousComponent    if self:hasItem() then        previousComponent = self.item    end    local component = getComponent(_ItemCP, ItemComponent)    component.itemId = itemId    component.itemNum = itemNum    self.item = component    self:replaceComponent(CoreComponentIds.Item, component, 'Item')    if (previousComponent ~= nil) then        _ItemCP:add(previousComponent)    end    return selfendfunction Entity:removeItem ()    local component = self.Item    self:removeComponent(CoreComponentIds.Item)    _ItemCP:add(component)    return selfend    ---@return Entityfunction Entity:setItemUse(v)    if (v ~= self:hasItemUse()) then        if (v) then            self:addComponent(CoreComponentIds.ItemUse, ItemUseComponent, 'ItemUse')        else            self:removeComponent(CoreComponentIds.ItemUse)        end    end    return selfend---@return booleanfunction Entity:hasItemUse()  return self:hasComponent(CoreComponentIds.ItemUse)end    ---@class ItemUsePosComponent : IComponent---@field posX   number---@field posY   numberlocal ItemUsePosComponent = {}---@privatefunction ItemUsePosComponent:new()    return setmetatable({}, {__index = ItemUsePosComponent})end---@type Entitas.Baglocal _ItemUsePosCP = Bag:new()for i=1,16 do  _ItemUsePosCP:add(ItemUsePosComponent:new())endfunction Entity:clearItemUsePosCP()    _ItemUsePosCP:clear()end---@return booleanfunction Entity:hasItemUsePos()  return self:hasComponent(CoreComponentIds.ItemUsePos)end---@param posX   number---@param posY   number---@returns Entitas.Entityfunction Entity:addItemUsePos (posX , posY )    local component = getComponent(_ItemUsePosCP, ItemUsePosComponent)    component.posX  = posX ;    component.posY  = posY ;    self.itemUsePos = component    self:addComponent(CoreComponentIds.ItemUsePos, component, 'ItemUsePos')    return selfendfunction Entity:replaceItemUsePos (posX , posY )    local previousComponent    if self:hasItemUsePos() then        previousComponent = self.itemUsePos    end    local component = getComponent(_ItemUsePosCP, ItemUsePosComponent)    component.posX  = posX     component.posY  = posY     self.itemUsePos = component    self:replaceComponent(CoreComponentIds.ItemUsePos, component, 'ItemUsePos')    if (previousComponent ~= nil) then        _ItemUsePosCP:add(previousComponent)    end    return selfendfunction Entity:removeItemUsePos ()    local component = self.ItemUsePos    self:removeComponent(CoreComponentIds.ItemUsePos)    _ItemUsePosCP:add(component)    return selfend    ---@class TimeRecordComponent : IComponent---@field Value   numberlocal TimeRecordComponent = {}---@privatefunction TimeRecordComponent:new()    return setmetatable({}, {__index = TimeRecordComponent})end---@type Entitas.Baglocal _TimeRecordCP = Bag:new()for i=1,16 do  _TimeRecordCP:add(TimeRecordComponent:new())endfunction Entity:clearTimeRecordCP()    _TimeRecordCP:clear()end---@return booleanfunction Entity:hasTimeRecord()  return self:hasComponent(CoreComponentIds.TimeRecord)end---@param Value   number---@returns Entitas.Entityfunction Entity:addTimeRecord (Value )    local component = getComponent(_TimeRecordCP, TimeRecordComponent)    component.Value  = Value ;    self.timeRecord = component    self:addComponent(CoreComponentIds.TimeRecord, component, 'TimeRecord')    return selfendfunction Entity:replaceTimeRecord (Value )    local previousComponent    if self:hasTimeRecord() then        previousComponent = self.timeRecord    end    local component = getComponent(_TimeRecordCP, TimeRecordComponent)    component.Value  = Value     self.timeRecord = component    self:replaceComponent(CoreComponentIds.TimeRecord, component, 'TimeRecord')    if (previousComponent ~= nil) then        _TimeRecordCP:add(previousComponent)    end    return selfendfunction Entity:removeTimeRecord ()    local component = self.TimeRecord    self:removeComponent(CoreComponentIds.TimeRecord)    _TimeRecordCP:add(component)    return selfend    ---@class ElementDiedRecordComponent : IComponentlocal ElementDiedRecordComponent = {}---@privatefunction ElementDiedRecordComponent:new()    return setmetatable({}, {__index = ElementDiedRecordComponent})end---@type Entitas.Baglocal _ElementDiedRecordCP = Bag:new()for i=1,16 do  _ElementDiedRecordCP:add(ElementDiedRecordComponent:new())endfunction Entity:clearElementDiedRecordCP()    _ElementDiedRecordCP:clear()end---@return booleanfunction Entity:hasElementDiedRecord()  return self:hasComponent(CoreComponentIds.ElementDiedRecord)end---@returns Entitas.Entityfunction Entity:addElementDiedRecord ()    local component = getComponent(_ElementDiedRecordCP, ElementDiedRecordComponent)    self.elementDiedRecord = component    self:addComponent(CoreComponentIds.ElementDiedRecord, component, 'ElementDiedRecord')    return selfendfunction Entity:replaceElementDiedRecord ()    local previousComponent    if self:hasElementDiedRecord() then        previousComponent = self.elementDiedRecord    end    local component = getComponent(_ElementDiedRecordCP, ElementDiedRecordComponent)    self.elementDiedRecord = component    self:replaceComponent(CoreComponentIds.ElementDiedRecord, component, 'ElementDiedRecord')    if (previousComponent ~= nil) then        _ElementDiedRecordCP:add(previousComponent)    end    return selfendfunction Entity:removeElementDiedRecord ()    local component = self.ElementDiedRecord    self:removeComponent(CoreComponentIds.ElementDiedRecord)    _ElementDiedRecordCP:add(component)    return selfend    ---@class MonsterDiedRecordComponent : IComponentlocal MonsterDiedRecordComponent = {}---@privatefunction MonsterDiedRecordComponent:new()    return setmetatable({}, {__index = MonsterDiedRecordComponent})end---@type Entitas.Baglocal _MonsterDiedRecordCP = Bag:new()for i=1,16 do  _MonsterDiedRecordCP:add(MonsterDiedRecordComponent:new())endfunction Entity:clearMonsterDiedRecordCP()    _MonsterDiedRecordCP:clear()end---@return booleanfunction Entity:hasMonsterDiedRecord()  return self:hasComponent(CoreComponentIds.MonsterDiedRecord)end---@returns Entitas.Entityfunction Entity:addMonsterDiedRecord ()    local component = getComponent(_MonsterDiedRecordCP, MonsterDiedRecordComponent)    self.monsterDiedRecord = component    self:addComponent(CoreComponentIds.MonsterDiedRecord, component, 'MonsterDiedRecord')    return selfendfunction Entity:replaceMonsterDiedRecord ()    local previousComponent    if self:hasMonsterDiedRecord() then        previousComponent = self.monsterDiedRecord    end    local component = getComponent(_MonsterDiedRecordCP, MonsterDiedRecordComponent)    self.monsterDiedRecord = component    self:replaceComponent(CoreComponentIds.MonsterDiedRecord, component, 'MonsterDiedRecord')    if (previousComponent ~= nil) then        _MonsterDiedRecordCP:add(previousComponent)    end    return selfendfunction Entity:removeMonsterDiedRecord ()    local component = self.MonsterDiedRecord    self:removeComponent(CoreComponentIds.MonsterDiedRecord)    _MonsterDiedRecordCP:add(component)    return selfend    ---@class MapRecordComponent : IComponent---@field value   number[]local MapRecordComponent = {}---@privatefunction MapRecordComponent:new()    return setmetatable({}, {__index = MapRecordComponent})end---@type Entitas.Baglocal _MapRecordCP = Bag:new()for i=1,16 do  _MapRecordCP:add(MapRecordComponent:new())endfunction Entity:clearMapRecordCP()    _MapRecordCP:clear()end---@return booleanfunction Entity:hasMapRecord()  return self:hasComponent(CoreComponentIds.MapRecord)end---@param value   number[]---@returns Entitas.Entityfunction Entity:addMapRecord (value )    local component = getComponent(_MapRecordCP, MapRecordComponent)    component.value  = value ;    self.mapRecord = component    self:addComponent(CoreComponentIds.MapRecord, component, 'MapRecord')    return selfendfunction Entity:replaceMapRecord (value )    local previousComponent    if self:hasMapRecord() then        previousComponent = self.mapRecord    end    local component = getComponent(_MapRecordCP, MapRecordComponent)    component.value  = value     self.mapRecord = component    self:replaceComponent(CoreComponentIds.MapRecord, component, 'MapRecord')    if (previousComponent ~= nil) then        _MapRecordCP:add(previousComponent)    end    return selfendfunction Entity:removeMapRecord ()    local component = self.MapRecord    self:removeComponent(CoreComponentIds.MapRecord)    _MapRecordCP:add(component)    return selfend    ---@class MonsterComponent : IComponent---@field config   MonsterConfiglocal MonsterComponent = {}---@privatefunction MonsterComponent:new()    return setmetatable({}, {__index = MonsterComponent})end---@type Entitas.Baglocal _MonsterCP = Bag:new()for i=1,16 do  _MonsterCP:add(MonsterComponent:new())endfunction Entity:clearMonsterCP()    _MonsterCP:clear()end---@return booleanfunction Entity:hasMonster()  return self:hasComponent(CoreComponentIds.Monster)end---@param config   MonsterConfig---@returns Entitas.Entityfunction Entity:addMonster (config )    local component = getComponent(_MonsterCP, MonsterComponent)    component.config  = config ;    self.monster = component    self:addComponent(CoreComponentIds.Monster, component, 'Monster')    return selfendfunction Entity:replaceMonster (config )    local previousComponent    if self:hasMonster() then        previousComponent = self.monster    end    local component = getComponent(_MonsterCP, MonsterComponent)    component.config  = config     self.monster = component    self:replaceComponent(CoreComponentIds.Monster, component, 'Monster')    if (previousComponent ~= nil) then        _MonsterCP:add(previousComponent)    end    return selfendfunction Entity:removeMonster ()    local component = self.Monster    self:removeComponent(CoreComponentIds.Monster)    _MonsterCP:add(component)    return selfend    ---@class IdComponentComponent : IComponent---@field value  numberlocal IdComponentComponent = {}---@privatefunction IdComponentComponent:new()    return setmetatable({}, {__index = IdComponentComponent})end---@type Entitas.Baglocal _IdComponentCP = Bag:new()for i=1,16 do  _IdComponentCP:add(IdComponentComponent:new())endfunction Entity:clearIdComponentCP()    _IdComponentCP:clear()end---@return booleanfunction Entity:hasIdComponent()  return self:hasComponent(CoreComponentIds.IdComponent)end---@param value  number---@returns Entitas.Entityfunction Entity:addIdComponent (value)    local component = getComponent(_IdComponentCP, IdComponentComponent)    component.value = value;    self.idComponent = component    self:addComponent(CoreComponentIds.IdComponent, component, 'IdComponent')    return selfendfunction Entity:replaceIdComponent (value)    local previousComponent    if self:hasIdComponent() then        previousComponent = self.idComponent    end    local component = getComponent(_IdComponentCP, IdComponentComponent)    component.value = value    self.idComponent = component    self:replaceComponent(CoreComponentIds.IdComponent, component, 'IdComponent')    if (previousComponent ~= nil) then        _IdComponentCP:add(previousComponent)    end    return selfendfunction Entity:removeIdComponent ()    local component = self.IdComponent    self:removeComponent(CoreComponentIds.IdComponent)    _IdComponentCP:add(component)    return selfend    ---@return Entityfunction Entity:setMoving(v)    if (v ~= self:hasMoving()) then        if (v) then            self:addComponent(CoreComponentIds.Moving, MovingComponent, 'Moving')        else            self:removeComponent(CoreComponentIds.Moving)        end    end    return selfend---@return booleanfunction Entity:hasMoving()  return self:hasComponent(CoreComponentIds.Moving)end    ---@return Entityfunction Entity:setElementFrame(v)    if (v ~= self:hasElementFrame()) then        if (v) then            self:addComponent(CoreComponentIds.ElementFrame, ElementFrameComponent, 'ElementFrame')        else            self:removeComponent(CoreComponentIds.ElementFrame)        end    end    return selfend---@return booleanfunction Entity:hasElementFrame()  return self:hasComponent(CoreComponentIds.ElementFrame)end    ---@class ElementFrameConfigComponent : IComponent---@field value   ElementFramelocal ElementFrameConfigComponent = {}---@privatefunction ElementFrameConfigComponent:new()    return setmetatable({}, {__index = ElementFrameConfigComponent})end---@type Entitas.Baglocal _ElementFrameConfigCP = Bag:new()for i=1,16 do  _ElementFrameConfigCP:add(ElementFrameConfigComponent:new())endfunction Entity:clearElementFrameConfigCP()    _ElementFrameConfigCP:clear()end---@return booleanfunction Entity:hasElementFrameConfig()  return self:hasComponent(CoreComponentIds.ElementFrameConfig)end---@param value   ElementFrame---@returns Entitas.Entityfunction Entity:addElementFrameConfig (value )    local component = getComponent(_ElementFrameConfigCP, ElementFrameConfigComponent)    component.value  = value ;    self.elementFrameConfig = component    self:addComponent(CoreComponentIds.ElementFrameConfig, component, 'ElementFrameConfig')    return selfendfunction Entity:replaceElementFrameConfig (value )    local previousComponent    if self:hasElementFrameConfig() then        previousComponent = self.elementFrameConfig    end    local component = getComponent(_ElementFrameConfigCP, ElementFrameConfigComponent)    component.value  = value     self.elementFrameConfig = component    self:replaceComponent(CoreComponentIds.ElementFrameConfig, component, 'ElementFrameConfig')    if (previousComponent ~= nil) then        _ElementFrameConfigCP:add(previousComponent)    end    return selfendfunction Entity:removeElementFrameConfig ()    local component = self.ElementFrameConfig    self:removeComponent(CoreComponentIds.ElementFrameConfig)    _ElementFrameConfigCP:add(component)    return selfend    ---@class ElementFrameBoardCacheComponent : IComponent---@field value Entity[][][]local ElementFrameBoardCacheComponent = {}---@privatefunction ElementFrameBoardCacheComponent:new()    return setmetatable({}, {__index = ElementFrameBoardCacheComponent})end---@type Entitas.Baglocal _ElementFrameBoardCacheCP = Bag:new()for i=1,16 do  _ElementFrameBoardCacheCP:add(ElementFrameBoardCacheComponent:new())endfunction Entity:clearElementFrameBoardCacheCP()    _ElementFrameBoardCacheCP:clear()end---@return booleanfunction Entity:hasElementFrameBoardCache()  return self:hasComponent(CoreComponentIds.ElementFrameBoardCache)end---@param value Entity[][][]---@returns Entitas.Entityfunction Entity:addElementFrameBoardCache (value)    local component = getComponent(_ElementFrameBoardCacheCP, ElementFrameBoardCacheComponent)    component.value = value;    self.elementFrameBoardCache = component    self:addComponent(CoreComponentIds.ElementFrameBoardCache, component, 'ElementFrameBoardCache')    return selfendfunction Entity:replaceElementFrameBoardCache (value)    local previousComponent    if self:hasElementFrameBoardCache() then        previousComponent = self.elementFrameBoardCache    end    local component = getComponent(_ElementFrameBoardCacheCP, ElementFrameBoardCacheComponent)    component.value = value    self.elementFrameBoardCache = component    self:replaceComponent(CoreComponentIds.ElementFrameBoardCache, component, 'ElementFrameBoardCache')    if (previousComponent ~= nil) then        _ElementFrameBoardCacheCP:add(previousComponent)    end    return selfendfunction Entity:removeElementFrameBoardCache ()    local component = self.ElementFrameBoardCache    self:removeComponent(CoreComponentIds.ElementFrameBoardCache)    _ElementFrameBoardCacheCP:add(component)    return selfend----------------------------Entity      end-------------------------------------------------------------------------Matcher     start------------------------------------------------@class Matcher : _Matcher---@field Movable _Matcher---@field Asset _Matcher---@field AssetObject _Matcher---@field Position _Matcher---@field FramePosition _Matcher---@field GridType _Matcher---@field Destroy _Matcher---@field UnNormalDestroy _Matcher---@field ResetGameBoard _Matcher---@field GameBoardCache _Matcher---@field ViewGrid _Matcher---@field ViewPos _Matcher---@field Angle _Matcher---@field SortOrder _Matcher---@field Scale _Matcher---@field GameBoard _Matcher---@field Element _Matcher---@field ElementConfig _Matcher---@field MoveTween _Matcher---@field Input _Matcher---@field Link _Matcher---@field CheckCanEliminate _Matcher---@field Linked _Matcher---@field Health _Matcher---@field Interactive _Matcher---@field Resource _Matcher---@field Score _Matcher---@field Item _Matcher---@field ItemUse _Matcher---@field ItemUsePos _Matcher---@field TimeRecord _Matcher---@field ElementDiedRecord _Matcher---@field MonsterDiedRecord _Matcher---@field MapRecord _Matcher---@field Monster _Matcher---@field IdComponent _Matcher---@field Moving _Matcher---@field ElementFrame _Matcher---@field ElementFrameConfig _Matcher---@field ElementFrameBoardCache _Matcherlocal Matcher = Entitas.MatcherMatcher.Init(CoreComponentIds)----------------------------Matcher      end-------------------------------------------------------------------------Pool   start------------------------------------------------@class Pool : _Pool---@field GameBoardCacheEntity Entity---@field gameBoardCache GameBoardCacheComponent---@field GameBoardEntity Entity---@field gameBoard GameBoardComponent---@field ViewGridEntity Entity---@field viewGrid ViewGridComponent---@field isResetGameBoardEntity bool---@field ScoreEntity Entity---@field score ScoreComponent---@field LinkEntity Entity---@field link LinkComponent---@field ItemEntity Entity---@field item ItemComponent---@field TimeRecordEntity Entity---@field timeRecord TimeRecordComponent---@field ElementDiedRecordEntity Entity---@field elementDiedRecord ElementDiedRecordComponent---@field MonsterDiedRecordEntity Entity---@field monsterDiedRecord MonsterDiedRecordComponent---@field ElementFrameBoardCacheEntity Entity---@field elementFrameBoardCache ElementFrameBoardCacheComponent---@field createRandomPiece fun(self:Pool,x:number,y:number,viewPosx:number,viewPosy:number):Entity---@field createElementFrame fun(self:Pool,frameData: LineData):Entity---@field createBlocker fun(self:Pool,x:number,y:number):Entity---@field removeRow fun(self:Pool,y:number):void---@field removeColumn fun(self:Pool,x:number):void---@field removeAll fun(self:Pool,):void---@field removeSame fun(self:Pool,elementType:ElementType):void---@field ShuffleGamebord fun(self:Pool,):void---@field createEmptyEntity  fun(self:Pool,): Entitylocal Pool = Entitas.Pool---@param {Entity[][][]} grid"---@returns Entityfunction Pool:setGameBoardCache(grid)    if (self:hasGameBoardCache()) then        error(Matcher.GameBoardCache)    end    local entity = self:createEntity('GameBoardCache')    self.gameBoardCacheEntity = entity    local component = getComponent(_GameBoardCacheCP, GameBoardCacheComponent)    component.grid = grid;    self.gameBoardCache = component    entity.gameBoardCache = component    entity:addComponent(CoreComponentIds.GameBoardCache, component, 'GameBoardCache')    return entityend---@param {Entity[][][]} grid"---@returns Entityfunction Pool:replaceGameBoardCache(grid)    local entity = self.gameBoardCacheEntity    if (entity == nil) then        entity = self:setGameBoardCache(grid)    else        local previousComponent = entity.gameBoardCache        local component = getComponent(_GameBoardCacheCP, GameBoardCacheComponent)        component.grid = grid        entity.gameBoardCache = component        self.gameBoardCache = component        entity:replaceComponent(CoreComponentIds.GameBoardCache, component, 'GameBoardCache')        _GameBoardCacheCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasGameBoardCache()    return self:getGroup(Matcher.GameBoardCache):getSingleEntity() ~= nilendfunction Pool:removeGameBoardCache()    local old = self.gameBoardCacheEntity    self.gameBoardCacheEntity = nil    self.gameBoardCache = nil    self:destroyEntity(old)end---@param {string} levelName"---@param { number} rows "---@param { number} columns "---@param {Config.LevelMapConfig} levelConfig"---@returns Entityfunction Pool:setGameBoard(levelName, rows , columns , levelConfig)    if (self:hasGameBoard()) then        error(Matcher.GameBoard)    end    local entity = self:createEntity('GameBoard')    self.gameBoardEntity = entity    local component = getComponent(_GameBoardCP, GameBoardComponent)    component.levelName = levelName;    component.rows  = rows ;    component.columns  = columns ;    component.levelConfig = levelConfig;    self.gameBoard = component    entity.gameBoard = component    entity:addComponent(CoreComponentIds.GameBoard, component, 'GameBoard')    return entityend---@param {string} levelName"---@param { number} rows "---@param { number} columns "---@param {Config.LevelMapConfig} levelConfig"---@returns Entityfunction Pool:replaceGameBoard(levelName, rows , columns , levelConfig)    local entity = self.gameBoardEntity    if (entity == nil) then        entity = self:setGameBoard(levelName, rows , columns , levelConfig)    else        local previousComponent = entity.gameBoard        local component = getComponent(_GameBoardCP, GameBoardComponent)        component.levelName = levelName        component.rows  = rows         component.columns  = columns         component.levelConfig = levelConfig        entity.gameBoard = component        self.gameBoard = component        entity:replaceComponent(CoreComponentIds.GameBoard, component, 'GameBoard')        _GameBoardCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasGameBoard()    return self:getGroup(Matcher.GameBoard):getSingleEntity() ~= nilendfunction Pool:removeGameBoard()    local old = self.gameBoardEntity    self.gameBoardEntity = nil    self.gameBoard = nil    self:destroyEntity(old)end---@param { Entity[][]} value"---@returns Entityfunction Pool:setViewGrid(value)    if (self:hasViewGrid()) then        error(Matcher.ViewGrid)    end    local entity = self:createEntity('ViewGrid')    self.viewGridEntity = entity    local component = getComponent(_ViewGridCP, ViewGridComponent)    component.value = value;    self.viewGrid = component    entity.viewGrid = component    entity:addComponent(CoreComponentIds.ViewGrid, component, 'ViewGrid')    return entityend---@param { Entity[][]} value"---@returns Entityfunction Pool:replaceViewGrid(value)    local entity = self.viewGridEntity    if (entity == nil) then        entity = self:setViewGrid(value)    else        local previousComponent = entity.viewGrid        local component = getComponent(_ViewGridCP, ViewGridComponent)        component.value = value        entity.viewGrid = component        self.viewGrid = component        entity:replaceComponent(CoreComponentIds.ViewGrid, component, 'ViewGrid')        _ViewGridCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasViewGrid()    return self:getGroup(Matcher.ViewGrid):getSingleEntity() ~= nilendfunction Pool:removeViewGrid()    local old = self.viewGridEntity    self.viewGridEntity = nil    self.viewGrid = nil    self:destroyEntity(old)end---@return boolfunction Pool:hasResetGameBoard()    return self:getGroup(Matcher.ResetGameBoard):getSingleEntity() ~= nilend---@return Poolfunction Pool:setResetGameBoard(value)    if (v ~= self:hasResetGameBoard()) then        if (v) then            self:addComponent(CoreComponentIds.ResetGameBoard, ResetGameBoardComponent, 'ResetGameBoard')        else            self:removeComponent(CoreComponentIds.ResetGameBoard)        end    end    return selfend---@param {number} value"---@returns Entityfunction Pool:setScore(value)    if (self:hasScore()) then        error(Matcher.Score)    end    local entity = self:createEntity('Score')    self.scoreEntity = entity    local component = getComponent(_ScoreCP, ScoreComponent)    component.value = value;    self.score = component    entity.score = component    entity:addComponent(CoreComponentIds.Score, component, 'Score')    return entityend---@param {number} value"---@returns Entityfunction Pool:replaceScore(value)    local entity = self.scoreEntity    if (entity == nil) then        entity = self:setScore(value)    else        local previousComponent = entity.score        local component = getComponent(_ScoreCP, ScoreComponent)        component.value = value        entity.score = component        self.score = component        entity:replaceComponent(CoreComponentIds.Score, component, 'Score')        _ScoreCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasScore()    return self:getGroup(Matcher.Score):getSingleEntity() ~= nilendfunction Pool:removeScore()    local old = self.scoreEntity    self.scoreEntity = nil    self.score = nil    self:destroyEntity(old)end---@param {Entity[]} linkArray"---@param {GridType} gridType"---@returns Entityfunction Pool:setLink(linkArray, gridType)    if (self:hasLink()) then        error(Matcher.Link)    end    local entity = self:createEntity('Link')    self.linkEntity = entity    local component = getComponent(_LinkCP, LinkComponent)    component.linkArray = linkArray;    component.gridType = gridType;    self.link = component    entity.link = component    entity:addComponent(CoreComponentIds.Link, component, 'Link')    return entityend---@param {Entity[]} linkArray"---@param {GridType} gridType"---@returns Entityfunction Pool:replaceLink(linkArray, gridType)    local entity = self.linkEntity    if (entity == nil) then        entity = self:setLink(linkArray, gridType)    else        local previousComponent = entity.link        local component = getComponent(_LinkCP, LinkComponent)        component.linkArray = linkArray        component.gridType = gridType        entity.link = component        self.link = component        entity:replaceComponent(CoreComponentIds.Link, component, 'Link')        _LinkCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasLink()    return self:getGroup(Matcher.Link):getSingleEntity() ~= nilendfunction Pool:removeLink()    local old = self.linkEntity    self.linkEntity = nil    self.link = nil    self:destroyEntity(old)end---@param {number} itemId"---@param {number} itemNum"---@returns Entityfunction Pool:setItem(itemId, itemNum)    if (self:hasItem()) then        error(Matcher.Item)    end    local entity = self:createEntity('Item')    self.itemEntity = entity    local component = getComponent(_ItemCP, ItemComponent)    component.itemId = itemId;    component.itemNum = itemNum;    self.item = component    entity.item = component    entity:addComponent(CoreComponentIds.Item, component, 'Item')    return entityend---@param {number} itemId"---@param {number} itemNum"---@returns Entityfunction Pool:replaceItem(itemId, itemNum)    local entity = self.itemEntity    if (entity == nil) then        entity = self:setItem(itemId, itemNum)    else        local previousComponent = entity.item        local component = getComponent(_ItemCP, ItemComponent)        component.itemId = itemId        component.itemNum = itemNum        entity.item = component        self.item = component        entity:replaceComponent(CoreComponentIds.Item, component, 'Item')        _ItemCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasItem()    return self:getGroup(Matcher.Item):getSingleEntity() ~= nilendfunction Pool:removeItem()    local old = self.itemEntity    self.itemEntity = nil    self.item = nil    self:destroyEntity(old)end---@param { number} Value "---@returns Entityfunction Pool:setTimeRecord(Value )    if (self:hasTimeRecord()) then        error(Matcher.TimeRecord)    end    local entity = self:createEntity('TimeRecord')    self.timeRecordEntity = entity    local component = getComponent(_TimeRecordCP, TimeRecordComponent)    component.Value  = Value ;    self.timeRecord = component    entity.timeRecord = component    entity:addComponent(CoreComponentIds.TimeRecord, component, 'TimeRecord')    return entityend---@param { number} Value "---@returns Entityfunction Pool:replaceTimeRecord(Value )    local entity = self.timeRecordEntity    if (entity == nil) then        entity = self:setTimeRecord(Value )    else        local previousComponent = entity.timeRecord        local component = getComponent(_TimeRecordCP, TimeRecordComponent)        component.Value  = Value         entity.timeRecord = component        self.timeRecord = component        entity:replaceComponent(CoreComponentIds.TimeRecord, component, 'TimeRecord')        _TimeRecordCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasTimeRecord()    return self:getGroup(Matcher.TimeRecord):getSingleEntity() ~= nilendfunction Pool:removeTimeRecord()    local old = self.timeRecordEntity    self.timeRecordEntity = nil    self.timeRecord = nil    self:destroyEntity(old)end---@returns Entityfunction Pool:setElementDiedRecord()    if (self:hasElementDiedRecord()) then        error(Matcher.ElementDiedRecord)    end    local entity = self:createEntity('ElementDiedRecord')    self.elementDiedRecordEntity = entity    local component = getComponent(_ElementDiedRecordCP, ElementDiedRecordComponent)    self.elementDiedRecord = component    entity.elementDiedRecord = component    entity:addComponent(CoreComponentIds.ElementDiedRecord, component, 'ElementDiedRecord')    return entityend---@returns Entityfunction Pool:replaceElementDiedRecord()    local entity = self.elementDiedRecordEntity    if (entity == nil) then        entity = self:setElementDiedRecord()    else        local previousComponent = entity.elementDiedRecord        local component = getComponent(_ElementDiedRecordCP, ElementDiedRecordComponent)        entity.elementDiedRecord = component        self.elementDiedRecord = component        entity:replaceComponent(CoreComponentIds.ElementDiedRecord, component, 'ElementDiedRecord')        _ElementDiedRecordCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasElementDiedRecord()    return self:getGroup(Matcher.ElementDiedRecord):getSingleEntity() ~= nilendfunction Pool:removeElementDiedRecord()    local old = self.elementDiedRecordEntity    self.elementDiedRecordEntity = nil    self.elementDiedRecord = nil    self:destroyEntity(old)end---@returns Entityfunction Pool:setMonsterDiedRecord()    if (self:hasMonsterDiedRecord()) then        error(Matcher.MonsterDiedRecord)    end    local entity = self:createEntity('MonsterDiedRecord')    self.monsterDiedRecordEntity = entity    local component = getComponent(_MonsterDiedRecordCP, MonsterDiedRecordComponent)    self.monsterDiedRecord = component    entity.monsterDiedRecord = component    entity:addComponent(CoreComponentIds.MonsterDiedRecord, component, 'MonsterDiedRecord')    return entityend---@returns Entityfunction Pool:replaceMonsterDiedRecord()    local entity = self.monsterDiedRecordEntity    if (entity == nil) then        entity = self:setMonsterDiedRecord()    else        local previousComponent = entity.monsterDiedRecord        local component = getComponent(_MonsterDiedRecordCP, MonsterDiedRecordComponent)        entity.monsterDiedRecord = component        self.monsterDiedRecord = component        entity:replaceComponent(CoreComponentIds.MonsterDiedRecord, component, 'MonsterDiedRecord')        _MonsterDiedRecordCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasMonsterDiedRecord()    return self:getGroup(Matcher.MonsterDiedRecord):getSingleEntity() ~= nilendfunction Pool:removeMonsterDiedRecord()    local old = self.monsterDiedRecordEntity    self.monsterDiedRecordEntity = nil    self.monsterDiedRecord = nil    self:destroyEntity(old)end---@param {Entity[][][]} value"---@returns Entityfunction Pool:setElementFrameBoardCache(value)    if (self:hasElementFrameBoardCache()) then        error(Matcher.ElementFrameBoardCache)    end    local entity = self:createEntity('ElementFrameBoardCache')    self.elementFrameBoardCacheEntity = entity    local component = getComponent(_ElementFrameBoardCacheCP, ElementFrameBoardCacheComponent)    component.value = value;    self.elementFrameBoardCache = component    entity.elementFrameBoardCache = component    entity:addComponent(CoreComponentIds.ElementFrameBoardCache, component, 'ElementFrameBoardCache')    return entityend---@param {Entity[][][]} value"---@returns Entityfunction Pool:replaceElementFrameBoardCache(value)    local entity = self.elementFrameBoardCacheEntity    if (entity == nil) then        entity = self:setElementFrameBoardCache(value)    else        local previousComponent = entity.elementFrameBoardCache        local component = getComponent(_ElementFrameBoardCacheCP, ElementFrameBoardCacheComponent)        component.value = value        entity.elementFrameBoardCache = component        self.elementFrameBoardCache = component        entity:replaceComponent(CoreComponentIds.ElementFrameBoardCache, component, 'ElementFrameBoardCache')        _ElementFrameBoardCacheCP:add(previousComponent)    end    return entityend---@return boolfunction Pool:hasElementFrameBoardCache()    return self:getGroup(Matcher.ElementFrameBoardCache):getSingleEntity() ~= nilendfunction Pool:removeElementFrameBoardCache()    local old = self.elementFrameBoardCacheEntity    self.elementFrameBoardCacheEntity = nil    self.elementFrameBoardCache = nil    self:destroyEntity(old)end---@return Poolfunction PoolIns()    if _Pool == nil then        _Pool = Pool:new(CoreComponentIds, CoreComponentIds.TotalComponents, nil)    end    return _Poolendfunction ReleasePool()    if _Pool ~= nil then        _Pool = Pool:new(CoreComponentIds, CoreComponentIds.TotalComponents, nil)    end    return _Poolend----------------------------Pool    end---------------------------------------------